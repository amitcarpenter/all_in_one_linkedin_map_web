<%- include('header') %>

<style>
  td.action_btns {
    height: 34px;
  }
</style>
<head>
  <!-- DataTables CSS -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css"
  />

  <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
  />

  <script>
    function formatDateTime(dateTimeString) {
      const options = {
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "numeric",
        minute: "numeric",
        hour12: true,
      };
      const formattedDateTime = new Date(dateTimeString).toLocaleString(
        "en-US",
        options
      );
      return formattedDateTime;
    }
  </script>
</head>

<!-- partial -->
<div class="main-panel">
  <div class="content-wrapper">
    <div class="pagetitle">
      <h3>Website Table</h3>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
          <li class="breadcrumb-item active">Sub Admin</li>
        </ol>
      </nav>
    </div>
    <div class="container">
      <!-- table start -->
      <div class="row">
        <div class="col-lg-12 grid-margin stretch-card">
          <div class="card">
            <div class="card-body">
              <!-- <h4 class="card-title">Sub Admin</h4> -->
              <div class="table-responsive">
                <table
                  class="table table-striped sub-admin-table"
                  id="userTableForData"
                >
                  <thead>
                    <tr>
                      <th>So.No.</th>
                      <th>Company Name</th>
                      <th>Company Email</th>
                      <th>Added At</th>
                      <th>More_Details</th>
                      <th>action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% data_for_web.forEach((user, index) => { %>
                    <tr>
                      <td><%= index + 1 %></td>
                      <td><%= user.DomainName || '-' %></td>
                      <td><%= user.Email || '-' %></td>
                      <td>
                        <%= user.createdAt ? new
                        Date(user.createdAt).toLocaleString(undefined, { year:
                        'numeric', month: '2-digit', day: '2-digit', hour:
                        'numeric', minute: 'numeric', hour12: true }) : '-' %>
                      </td>
                      <td class="view-btn">
                        <button
                          type="button"
                          class="view-btn btn btn-outline-secondary p-1"
                        >
                          <a href="/profile">View</a>
                        </button>
                      </td>
                      <td class="action_btns">
                        <button
                          type="button"
                          class="btn btn-success"
                          data-bs-toggle="modal"
                          data-bs-target="#editEmailDataModal"
                        >
                          Edit
                        </button>

                        <!--  Modal edit data start-->
                        <div class="modal" id="editEmailDataModal">
                          <div class="modal-dialog">
                            <div class="modal-content">
                              <!-- Modal Header -->
                              <div class="modal-header edit_email_modal_hed">
                                <h4>Edit Data</h4>
                                <button
                                  type="button"
                                  class=""
                                  data-bs-dismiss="modal"
                                  aria-label=""
                                >
                                  <i class="fa-solid fa-xmark"></i>
                                </button>
                              </div>

                              <!-- Modal body -->
                              <div class="modal-body edit_email_modal_body">
                                <div class="container">
                                  <form id="editEmailForm">
                                    <div class="row">
                                      <div class="col-12">
                                        <div class="form-group">
                                          <input
                                            type="email"
                                            id="editEmail"
                                            placeholder="Edit Email"
                                            class="form-control"
                                            oninput="clearErrorRedMsg('editEmailErrormsgshow')"
                                          />
                                          <span
                                            id="editEmailErrormsgshow"
                                            style="
                                              color: red;
                                              margin-left: 10px;
                                            "
                                          ></span>
                                        </div>
                                      </div>
                                      <div class="col-12">
                                        <div class="form-group">
                                          <input
                                            type="password"
                                            id="editPassword"
                                            placeholder="Edit Password"
                                            class="form-control"
                                            oninput="clearErrorRedMsg('editPasswordErrormsgshow')"
                                          />
                                          <span
                                            id="editPasswordErrormsgshow"
                                            style="
                                              color: red;
                                              margin-left: 10px;
                                            "
                                          ></span>
                                        </div>
                                      </div>
                                      <div class="col-12">
                                        <div class="form-group">
                                          <input
                                            type="text"
                                            id="editIp"
                                            placeholder="Edit IP Address"
                                            class="form-control"
                                            oninput="clearErrorRedMsg('editIpErrormsgshow')"
                                          />
                                          <span
                                            id="editIpErrormsgshow"
                                            style="
                                              color: red;
                                              margin-left: 10px;
                                            "
                                          ></span>
                                        </div>
                                      </div>
                                      <div class="col-12">
                                        <div class="form-group">
                                          <input
                                            type="date"
                                            id="editDate"
                                            placeholder="Date"
                                            class="form-control"
                                            oninput="clearErrorRedMsg('editDateErrormsgshow')"
                                          />
                                          <span
                                            id="editDateErrormsgshow"
                                            style="
                                              color: red;
                                              margin-left: 10px;
                                            "
                                          ></span>
                                        </div>
                                      </div>
                                    </div>
                                  </form>
                                </div>
                              </div>
                              <!-- modal footer -->
                              <div class="edit_email_modal_footer">
                                <div class="modal-footer modal_btn_data_update">
                                  <button
                                    type="submit"
                                    class="btn"
                                    onclick="editEmailDataValidation()"
                                  >
                                    Update
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- Modal edit data end -->

                        <!-- Delete button -->
                        <button
                          type="button"
                          class="btn btn-danger"
                          data-bs-toggle="modal"
                          data-bs-target="#deleteEmailDataModal"
                          onclick="return ConfirmDelete()"
                        >
                          Delete
                        </button>
                      </td>
                    </tr>
                    <% }) %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- DataTables CSS -->
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>

  <!-- DataTables JavaScript with defer attribute -->
  <script
    defer
    src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"
  ></script>

  <!-- DataTables Buttons JavaScript with defer attribute -->
  <script
    defer
    src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"
  ></script>
  <script
    defer
    src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"
  ></script>
  <script
    defer
    src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"
  ></script>
  <script
    defer
    src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"
  ></script>
  <script
    defer
    src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"
  ></script>

  <script
    defer
    src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"
  ></script>

  <script defer>
    $(document).ready(function () {
      $("#userTableForData").DataTable({
        dom: "Bfrtip",
        buttons: [
          "copyHtml5",
          "csvHtml5",
          "excelHtml5",
          {
            extend: "pdfHtml5",
            text: "PDF",
          },
          {
            extend: "print",
            text: "Print",
            autoPrint: false,
          },
        ],
      });
    });
  </script>

  <%- include('footer') %>
</div>
